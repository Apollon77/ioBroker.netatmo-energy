<!--
	ioBroker.vis netatmo-energy Widget-Set

	version: "0.0.3"

	Copyright 2021 ioKlausi nii@gmx.at
-->
<link rel="stylesheet" href="widgets/netatmo-energy/css/style.css" />

<!-- here you can include so many js-files as you want -->
<script type="text/javascript" src="widgets/netatmo-energy/js/netatmo-energy.js"></script>

<script id="tplnetatmo-energyValves"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/netatmo-energy/img/netatmo-energy.png"></img>'
		data-vis-attrs="oid/id/getDynamicAttributes;
										temp_oid/hidden;
										act_oid/hidden;
										win_oid/hidden;
										title_oid/hidden;
										xtxt[10]/slider,0,1024,1;
										ytxt[120]/slider,0,768,1;
										atxt[&room];
										ctxt/color;
										txtfont/fontname;
										txtfontsize[large]/nselect,medium,xx-small,x-small,small,large,x-large,xx-large,smaller,larger;
										show_win[true]/checkbox;"
		data-vis-attrs0="group.frame;
										brltop[15]/slider,0,25,1;
										brrtop[0]/slider,0,25,1;
										ctoparea[#F39C12]/color;
										brlbottom[0]/slider,0,25,1;
										brrbottom[15]/slider,0,25,1;
										cbottomarea[#cb7906]/color;"
		data-vis-attrs1="group.slider;
										min[6]/number;
										max[30]/number;
										step/number;
										orientation/nselect,horizontal,vertical;
										inverted/checkbox;
										submitmethod[stop]/nselect,scroll,stop;
										topslider[30]/slider,0,1024,1;
										leftslider[60]/slider,0,768,1;
										widthslider[180]/slider,0,1024,1;"
		data-vis-attrs2="group.temp;
										valvesoll;
										valvesollbehind;
										cstxt/color;
										valveist;
										valveistbehind;
										citxt/color;
										valveact;
										valveactbehind;
										catxt/color;
										topvalve[65]/slider,0,768,1;
										leftvalve[115]/slider,0,1024,1;
										tempfont/fontname;
										tempfontsize/nselect,medium,xx-small,x-small,small,large,x-large,xx-large,smaller,larger;"
		data-vis-attrs3="group.picture;
										upd_oid/id;
										picture/image;
										xpic[10]/slider,0,1024,1;
										ypic[20]/slider,0,768,1;
										hpic[40]/slider,0,1024,1;
										wpic[40]/slider,0,768,1;"
		data-vis-set="netatmo-energy"
		data-vis-type="ctrl,val"
		data-vis-name="Thermostat"
		data-vis-beta="true">

	<div style="overflow:visible; width: 250px; height: 143px; padding: 2px;" class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>">
		<div style="width: 100%; height: 100%;" class="netatmo-energy-class vis-widget-body <%== this.data.attr('class') %>">
			<div class="netatmo-borderbutton netatmo-borderbutton-top"
				   style="<%== (this.data.attr('brltop')) ? ('border-top-left-radius: ' + this.data.attr('brltop')) + 'px;' : 'border-top-left-radius: 0px;'%><%== (this.data.attr('brrtop')) ? ('border-top-right-radius: ' + this.data.attr('brrtop')) + 'px;' : 'border-top-right-radius: 0px;'%><%== (this.data.attr('ctoparea')) ? ('background-color: ' + this.data.attr('ctoparea')) + ';' : 'background-color: lightgrey;'%>"</div>
			</div>
			<div class="netatmo-borderbutton netatmo-borderbutton-bottom" style="<%== (this.data.attr('brlbottom')) ? ('border-bottom-left-radius: ' + this.data.attr('brlbottom')) + 'px;' : 'border-bottom-left-radius: 0px;'%>
				<%== (this.data.attr('brrbottom')) ? ('border-bottom-right-radius: ' + this.data.attr('brrbottom')) + 'px;' : 'border-bottom-right-radius: 0px;'%>
				<%== (this.data.attr('cbottomarea')) ? ('background-color: ' + this.data.attr('cbottomarea')) + ';' : 'background-color: lightblue;'%>">
			</div>
			<span class="wrapper">
				<!-- Show picture -->
				<div id="picture_frame">
					<img class="netatmo-logo" style="position: absolute; left: <%== this.data.attr('xpic')%>px; top: <%== this.data.attr('ypic')%>px; width: <%== this.data.attr('wpic')%>px; height: <%== this.data.attr('hpic')%>px;" src="<%== (this.data.attr('picture')) ? (this.data.attr('picture')) : 'widgets/netatmo-energy/img/valve_white.png' %>" alt="Valve"></img>
			  	<%= (el) -> vis.binds.netatmobasic.refreshAPI(el, this.data.attr('upd_oid')) %>
				</div>

				<!-- Show title -->
				<div class="netatmo-title" id="<%= this.data.attr('wid') %>_title" style="position: absolute; left: <%== this.data.attr('xtxt') %>px; top: <%== this.data.attr('ytxt') %>px;">
					<%= (el) -> vis.binds.netatmobasic.gettitle(el, this.data.attr('wid'), this.data) %>
				</div>

				<!-- Show slider -->
				<div class="netatmo-slidergroup" style="position: absolute; top: <%== this.data.attr('topslider') %>px; left: <%== this.data.attr('leftslider') %>px; width: <%== this.data.attr('widthslider') %>px;">
            <div class="netatmoSlider" id="<%= this.data.attr('wid') %>_slider" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.netatmobasic.slider(el, this.data.attr('wid'), this.view, this.data, {min: parseFloat(data.min), max: parseFloat(data.max), step: parseFloat(data.step), orientation: data.orientation, inverted: data.inverted, submitmethod: data.submitmethod}) %> /></div>
        </div>

				<!-- Show temperature box -->
				<div class="netatmo-box" style="position: absolute; top: <%== this.data.attr('topvalve') %>px; left: <%== this.data.attr('leftvalve') %>px;">
					<div id = "NetatmoShowTemp" class ="netatmo-info" style="overflow:visible; position: relative; <%== (this.data.attr('tempfont')) ? ('font-family: ' + this.data.attr('tempfont') + ';') : 'font-family: Verdana, Geneva, sans-serif;'%> <%== (this.data.attr('tempfontsize')) ? ('font-size: ' + this.data.attr('tempfontsize') + ';') : 'font-size: x-small;'%>">
						<%= (el) -> vis.binds.netatmobasic.gettemperatures(el, this.data.attr('wid'), this.data) %>
					</div>
				</div>

			</span>
		</div>
	</div>
</script>
